<h1>注文情報入力</h1>
<%= form_with(model: @order, url: {action: 'confirm'}, local: true) do |f| %>
  <%= f.hidden_field :customer_id, value: current_customer.id %>
  <%= f.hidden_field :postage, value: "800" %>
  <div class="form-group">
    <%= f.label :payment_selection, "支払い方法" %> <br>
    <%= f.radio_button :payment_selection, :クレジットカード, default: true %>
    <%= f.label :クレジットカード %> <br>
    <%= f.radio_button :payment_selection, :銀行振込 %>
    <%= f.label :銀行振込 %>
  </div>
  <div class="form-group">
    <p>お届け先</p>
      <%= radio_button_tag("address", "customer_address") %>
      <%= f.label "ご自身の住所" %>
      <p>〒<%= current_customer.postcode %>  <%= current_customer.address %>  <%= current_customer.fullname %></p>
      <%= radio_button_tag("address", "existing_shipping_address") %>
      <%= f.label "登録済み住所から選択" %>
      <p><%= f.select :address, @addresses.all.map {|address| registred_address(address)} %></p>
      <%= radio_button_tag("address", "add_shipping_address") %>
      <%= f.label "新しいお届け先" %>
      <%= fields_for :shipping_address do |a| %>
      <dl>
        <dt><%= a.label :postcode, "郵便番号" %></dt>
        <dd><%= a.text_field :postcode %></dd>
        <dt><%= a.label :address, "住所" %></dt>
        <dd><%= a.text_field :address %></dd>
        <dt><%= a.label :address_name, "宛名" %></dt>
        <dd><%= a.text_field :address_name %></dd>
      <dl>
      <% end %>
  </div>
  <%= f.submit "確認画面へ進む", class: "btn btn-primary" %>
<% end %>